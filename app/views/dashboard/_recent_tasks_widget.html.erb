<div data-widget-id="recent_tasks" data-span="<%= span %>" class="<%= span %> <%= card_class %> px-5 pt-6 pb-2.5 sm:px-7.5">
  <%= render "dashboard/widget_header",
        title: t("dashboard.recent_tasks", default: "Tasks"),
        link_label: t("dashboard.view_all", default: "View all"),
        link_path: tasks_path %>
  <div class="max-w-full overflow-x-auto rounded-xl border border-white/10">
    <table class="w-full table-auto">
      <thead>
        <tr class="bg-slate-900/60 text-left border-b border-white/10">
          <th class="px-4 py-4 font-medium text-slate-200"><%= t("tasks.task_label", default: "Task") %></th>
          <th class="px-4 py-4 font-medium text-slate-200"><%= t("tasks.customer", default: "Customer") %></th>
          <th class="px-4 py-4 font-medium text-slate-200"><%= t("tasks.priority", default: "Priority") %></th>
          <th class="px-4 py-4 font-medium text-slate-200"><%= t("dashboard.status", default: "Status") %></th>
          <th class="px-4 py-4 text-right font-medium text-slate-200"><%= t("dashboard.actions", default: "Actions") %></th>
        </tr>
      </thead>
      <tbody>
        <% Array(recent_tasks).each do |task| %>
          <tr class="border-b border-white/10 hover:bg-white/5 transition-colors">
            <td class="px-4 py-4 text-sm font-medium text-white">
              <%= link_to task_path(task), class: "text-yellow-300 hover:text-yellow-200 transition-colors" do %>
                <%= task.title.presence || "Task ##{task.id}" %>
              <% end %>
            </td>
            <td class="px-4 py-4 text-sm text-slate-300"><%= task.customer&.name || "-" %></td>
            <td class="px-4 py-4">
              <%= render "shared/priority_badge", priority: task.priority %>
            </td>
            <td class="px-4 py-4">
              <%= render "shared/status_badge", status: task.status %>
            </td>
            <td class="px-4 py-4 text-right">
              <%= link_to t("dashboard.view", default: "View"), task_path(task), class: "inline-flex items-center rounded-xl border border-white/10 bg-white/5 px-3 py-1 text-sm font-medium text-white hover:bg-white/10" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
