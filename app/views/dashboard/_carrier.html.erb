<%= render "dashboard/kpis" %>

<div class="grid gap-6 mt-6 md:grid-cols-2">
  <%# Payments Section %>
  <%= render layout: "dashboard/section_wrapper", locals: { title: t("dashboard.carrier.payments.title"), subtitle: t("dashboard.carrier.payments.subtitle"), link_label: t("dashboard.carrier.payments.link_text"), link_path: payments_path } do %>
    <div class="p-4 space-y-6">
      <div class="flex items-center-justify-between">
        <p class="text-sm leading-6 text-slate-500"><%= t("dashboard.carrier.payments.description") %></p>
        <span class="text-xs font-semibold text-primary-500"><%= t("dashboard.carrier.payments.status") %></span>
      </div>
      <div class="text-3xl font-semibold text-slate-900"><%= number_to_currency(@balances.due, unit: "$", precision: 2) %></div>
      <div class="flex items-center gap-4">
        <div>
          <p class="text-xs font-semibold uppercase tracking-wide text-slate-500"><%= t("dashboard.carrier.payments.next_payment_label") %></p>
          <p class="text-sm text-slate-900"><%= l(@balances.next_payment_date, format: :long) %></p>
        </div>
        <div>
          <p class="text-xs font-semibold uppercase tracking-wide text-slate-500"><%= t("dashboard.carrier.payments.overdue_label") %></p>
          <p class="text-sm text-slate-900"><%= pluralize(@balances.overdue_count, t("dashboard.carrier.payments.overdue_unit")) %></p>
        </div>
      </div>
    </div>
  <% end %>

  <%# Shipments Section %>
  <%= render layout: "dashboard/section_wrapper", locals: { title: t("dashboard.carrier.shipments.title"), subtitle: t("dashboard.carrier.shipments.subtitle"), link_label: t("dashboard.carrier.shipments.link_text"), link_path: shipments_path } do %>
    <div class="p-4 space-y-5">
      <%= render "dashboard/shipments_grid", shipments: @shipments %>
    </div>
  <% end %>

  <%# Alerts Section %>
  <%= render layout: "dashboard/section_wrapper", locals: { title: t("dashboard.carrier.alerts.title"), subtitle: t("dashboard.carrier.alerts.subtitle"), link_label: t("dashboard.carrier.alerts.link_text"), link_path: alerts_path } do %>
    <div class="p-4 space-y-6">
      <p class="text-sm leading-6 text-slate-500"><%= t("dashboard.carrier.alerts.description") %></p>
      <ul class="space-y-3 text-sm text-slate-900">
        <% @alerts.take(3).each do |alert| %>
          <li class="flex items-center justify-between">
            <span><%= alert.message %></span>
            <span class="text-xs text-slate-500"><%= time_ago_in_words(alert.created_at) %> <%= t("ago") %></span>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%# Support Section %>
  <%= render layout: "dashboard/section_wrapper", locals: { title: t("dashboard.carrier.support.title"), subtitle: t("dashboard.carrier.support.subtitle"), link_label: t("dashboard.carrier.support.link_text"), link_path: support_path } do %>
    <div class="p-4 space-y-4">
      <p class="text-sm leading-6 text-slate-500"><%= t("dashboard.carrier.support.description") %></p>
      <div class="flex items-center gap-3">
        <div class="inline-flex items-center justify-center w-10 h-10 text-slate-100 rounded-full bg-slate-900">
          <%= t("dashboard.carrier.support.icon") %>
        </div>
        <div>
          <p class="text-sm font-semibold text-slate-900"><%= t("dashboard.carrier.support.contact") %></p>
          <p class="text-xs text-slate-500"><%= t("dashboard.carrier.support.hours") %></p>
        </div>
      </div>
    </div>
  <% end %>
</div>
