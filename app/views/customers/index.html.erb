<% content_for :page_title, t("customers.title", default: "Customers") %>

<div class="space-y-6">
  <%= turbo_stream_from "customers" %>

  <div class="flex items-center justify-between gap-4">
    <div>
      <nav class="flex text-sm text-slate-300" aria-label="Breadcrumb">
        <ol class="inline-flex items-center space-x-1 md:space-x-3">
          <li class="inline-flex items-center">
            <%= link_to root_path, class: "text-slate-300 hover:text-white" do %>
              <span class="material-icons text-sm mr-1">home</span>
              <%= t("nav.home", default: "Home") %>
            <% end %>
          </li>
          <li>
            <div class="flex items-center">
              <span class="material-icons text-sm text-slate-500 mx-1">chevron_right</span>
              <span class="text-white font-medium"><%= t("customers.title", default: "Customers") %></span>
            </div>
          </li>
        </ol>
      </nav>
      <h1 class="mt-3 text-3xl font-bold text-white"><%= t("customers.title", default: "Customers") %></h1>
    </div>

    <%= link_to new_customer_path, class: "inline-flex items-center justify-center rounded-xl bg-yellow-400 px-6 py-3 text-sm font-semibold text-black shadow-lg shadow-yellow-500/20 hover:bg-yellow-300" do %>
      <span class="material-icons mr-2 text-xl">add</span>
      <%= t("customers.new", default: "New Customer") %>
    <% end %>
  </div>

  <div class="rounded-2xl border border-white/10 bg-white/5 shadow-xl shadow-black/30 backdrop-blur overflow-hidden">
    <div class="p-6 border-b border-white/10">
      <%= form_with url: search_customers_path, method: :get, data: { turbo_frame: "customers_table", turbo_action: "advance" }, class: "flex flex-col sm:flex-row gap-3" do |f| %>
        <%= f.text_field :q,
          value: params[:q],
          placeholder: t("customers.search_placeholder", default: "Search customers by name..."),
          class: "flex-1 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/30" %>
        <%= f.submit t("common.search", default: "Search"), class: "inline-flex items-center justify-center rounded-xl bg-yellow-400 px-6 py-3 text-sm font-semibold text-black hover:bg-yellow-300" %>
      <% end %>
    </div>

    <%= turbo_frame_tag "customers_table" do %>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-white/5 border-b border-white/10">
            <tr>
              <th class="px-6 py-4 text-left text-sm font-semibold text-slate-200"><%= t("customers.name", default: "Name") %></th>
              <th class="px-6 py-4 text-left text-sm font-semibold text-slate-200"><%= t("customers.email", default: "Email") %></th>
              <th class="px-6 py-4 text-left text-sm font-semibold text-slate-200"><%= t("customers.category", default: "Category") %></th>
              <th class="px-6 py-4 text-center text-sm font-semibold text-slate-200"><%= t("customers.tasks", default: "Tasks") %></th>
              <th class="px-6 py-4 text-right text-sm font-semibold text-slate-200"><%= t("customers.actions", default: "Actions") %></th>
            </tr>
          </thead>
          <tbody id="customers_list" class="divide-y divide-white/10">
            <%= render partial: "customers/customer_card", collection: @customers, as: :customer %>
          </tbody>
        </table>

        <% if @customers.empty? %>
          <div class="px-6 py-16 text-center">
            <span class="material-icons text-slate-400 text-5xl mb-3">group</span>
            <h3 class="text-base font-semibold text-white mb-1"><%= t("customers.no_customers", default: "No customers found") %></h3>
            <p class="text-sm text-slate-300 mb-4"><%= t("customers.empty_hint", default: "Get started by creating your first customer.") %></p>
            <%= link_to new_customer_path, class: "inline-flex items-center rounded-xl bg-yellow-400 px-4 py-2 text-sm font-semibold text-black hover:bg-yellow-300" do %>
              <span class="material-icons mr-2 text-xl">add</span>
              <%= t("customers.create", default: "Create Customer") %>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
