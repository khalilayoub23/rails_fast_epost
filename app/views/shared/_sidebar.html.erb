<aside id="sidebar" 
       dir="<%= text_direction %>"
       data-hidden-class="<%= rtl? ? 'translate-x-full' : '-translate-x-full' %>"
       class="absolute <%= rtl? ? 'right-0 border-l translate-x-full' : 'left-0 border-r -translate-x-full' %> top-0 z-9999 flex h-screen w-72.5 flex-col overflow-y-hidden bg-slate-950/90 text-slate-200 border-white/10 backdrop-blur duration-300 ease-linear lg:static lg:translate-x-0">
  <!-- SIDEBAR HEADER -->
  <div class="flex items-center justify-between gap-2 px-4 py-6 lg:py-7 border-b border-white/5 bg-white/5">
    <%= render 'shared/logo', size: 'md', text: true %>
  </div>
  <!-- SIDEBAR HEADER -->

  <div class="no-scrollbar flex flex-col overflow-y-auto duration-300 ease-linear">
    <!-- Sidebar Menu -->
    <nav class="mt-5 py-4 px-4 lg:mt-9 lg:px-6">
      <div>
        <ul class="mb-6 flex flex-col gap-1.5">
          <li>
            <%= link_to root_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(root_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(root_path)}">space_dashboard</span>
              <%= t('sidebar.dashboard', default: 'Dashboard') %>
            <% end %>
          </li>
          <% if current_user&.manager? %>
          <li>
            <%= link_to payments_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(payments_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(payments_path)}">payment</span>
              <%= t('sidebar.payments', default: 'Payments') %>
            <% end %>
          </li>
          <% end %>
          <li>
            <%= link_to customers_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(customers_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(customers_path)}">people</span>
              <%= t('sidebar.customers', default: 'Customers') %>
            <% end %>
          </li>
          <li>
            <%= link_to tasks_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(tasks_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(tasks_path)}">task</span>
              <%= t('sidebar.tasks', default: 'Tasks') %>
            <% end %>
          </li>

          <% if current_user&.manager? || current_user&.sender_role? || current_user&.lawyer? || current_user&.ecommerce_seller? %>
            <li>
              <%= link_to cart_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(cart_path)}" do %>
                <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(cart_path)}">shopping_cart</span>
                <%= t('sidebar.cart', default: 'Cart') %>
              <% end %>
            </li>
          <% end %>
          <% if policy(Delivery).index? %>
          <li>
            <%= link_to deliveries_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(deliveries_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(deliveries_path)}">picture_as_pdf</span>
              <%= t('sidebar.court_deliveries', default: 'Court Deliveries') %>
            <% end %>
          </li>
          <% end %>
          <% if current_user&.admin? %>
          <li>
            <%= link_to admin_document_templates_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(admin_document_templates_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(admin_document_templates_path)}">description</span>
              <%= t('sidebar.document_templates', default: 'Document Templates') %>
            <% end %>
          </li>
          <li>
            <%= link_to carriers_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(carriers_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(carriers_path)}">local_shipping</span>
              <%= t('sidebar.carriers', default: 'Carriers') %>
            <% end %>
          </li>
          <li>
            <%= link_to admin_senders_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(admin_senders_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(admin_senders_path)}">send</span>
              <%= t('sidebar.senders', default: 'Senders') %>
            <% end %>
          </li>
          <li>
            <%= link_to admin_messengers_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(admin_messengers_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(admin_messengers_path)}">pedal_bike</span>
              <%= t('sidebar.messengers', default: 'Messengers') %>
            <% end %>
          </li>
          <li>
            <%= link_to admin_lawyers_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(admin_lawyers_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(admin_lawyers_path)}">gavel</span>
              <%= t('sidebar.lawyers', default: 'Lawyers') %>
            <% end %>
          </li>
          <li>
            <%= link_to admin_contact_inquiries_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(admin_contact_inquiries_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(admin_contact_inquiries_path)}">mail</span>
              <%= t('sidebar.contact_inquiries', default: 'Contact Inquiries') %>
              <% if @pending_count ||= ContactInquiry.pending.count > 0 %>
                <span class="<%= rtl? ? 'mr-auto' : 'ml-auto' %> bg-amber-500/90 text-slate-950 font-bold rounded-full px-2.5 py-0.5 text-xs shadow-sm shadow-black/30"><%= @pending_count %></span>
              <% end %>
            <% end %>
          </li>
          <li>
            <%= link_to admin_branding_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(admin_branding_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(admin_branding_path)}">brush</span>
              <%= t('sidebar.branding', default: 'Branding') %>
            <% end %>
          </li>
          <%# Admin Dashboard link removed as it is redundant with the main Dashboard %>
          <li>
            <%= link_to new_admin_pdfs_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(new_admin_pdfs_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(new_admin_pdfs_path)}">picture_as_pdf</span>
              PDF Tools
            <% end %>
          </li>
          <% end %>
          <li class="mt-2 border-t border-white/10"></li>
          <li>
            <%= link_to profile_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(profile_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(profile_path)}">person</span>
              <%= t('sidebar.profile', default: 'Profile') %>
            <% end %>
          </li>
          <li>
            <%= link_to settings_path, class: "group relative z-10 flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold text-slate-200 transition-all duration-200 hover:bg-white/5 hover:text-white #{rtl? ? 'flex-row-reverse text-right' : ''} #{'bg-white/10 text-white shadow-lg shadow-black/30 ring-1 ring-white/15' if current_page?(settings_path)}" do %>
              <span class="material-icons text-lg shrink-0 text-slate-400 group-hover:text-white #{'text-amber-300' if current_page?(settings_path)}">settings</span>
              <%= t('sidebar.settings', default: 'Settings') %>
            <% end %>
          </li>
        </ul>
      </div>
    </nav>
    <!-- Sidebar Menu -->
  </div>
</aside>
