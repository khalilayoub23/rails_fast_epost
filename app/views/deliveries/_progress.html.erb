<% progress = delivery.signature_progress %>
<div class="rounded-2xl border border-gray-700 bg-gray-800/60 p-6 shadow-xl">
  <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
    <div>
      <p class="text-sm uppercase tracking-wide text-gray-400">Signature progress</p>
      <h2 class="text-2xl font-semibold text-white"><%= delivery.case_number %></h2>
      <p class="text-xs text-gray-400">Requires <%= progress[:total] %> signatures</p>
    </div>
    <div class="text-right">
      <p class="text-3xl font-semibold text-yellow-300"><%= progress[:percentage] %>%</p>
      <p class="text-xs text-gray-400"><%= progress[:completed] %> completed</p>
    </div>
  </div>

  <div class="mt-6 h-3 w-full overflow-hidden rounded-full bg-gray-700">
    <div class="h-full rounded-full bg-gradient-to-r from-yellow-400 via-amber-400 to-orange-500" style="width: <%= progress[:percentage] %>%"></div>
  </div>

  <div class="mt-6 grid gap-4 md:grid-cols-3">
    <% Delivery::SIGNATURE_ROLES.each do |role| %>
      <% data = delivery.signature_details_for(role) %>
      <% signed = data["signed"] %>
      <div class="rounded-xl border border-gray-700/70 bg-gray-900/40 p-4">
        <p class="text-xs uppercase tracking-wide text-gray-400"><%= role.titleize %></p>
        <p class="text-sm font-semibold text-white"><%= delivery.public_send(role)&.full_name || "Unassigned" %></p>
        <p class="mt-1 text-xs <%= signed ? 'text-green-400' : 'text-amber-300' %>">
          <%= signed ? "Signed" : "Pending" %>
        </p>
      </div>
    <% end %>
  </div>
</div>
