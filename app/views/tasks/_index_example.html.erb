<!-- Example Turbo Frame: Tasks List -->
<div class="rounded-2xl border border-white/10 bg-white/5 shadow-xl shadow-black/30 backdrop-blur">
  <div class="border-b border-white/10 px-7 py-4">
    <h3 class="font-semibold text-white">
      <%= t('tasks.title') %>
    </h3>
  </div>

  <div class="p-7">
    <!-- Search form with Turbo Frame -->
    <%= form_with url: search_tasks_path, method: :get, data: { turbo_frame: "tasks_list" } do |f| %>
      <div class="mb-5.5">
        <%= f.text_field :q, 
            placeholder: t('common.search'),
            class: "w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/30",
            data: { 
              controller: "autocomplete",
              autocomplete_url_value: search_tasks_path,
              action: "input->autocomplete#search"
            } %>
      </div>
    <% end %>

    <!-- Turbo Frame for tasks list -->
    <%= turbo_frame_tag "tasks_list" do %>
      <%= render "tasks/list", tasks: @tasks %>
    <% end %>

    <!-- Button to load more (pagination) -->
    <% if @tasks.next_page %>
      <%= link_to t('common.load_more'), 
          tasks_path(page: @tasks.next_page),
          data: { turbo_frame: "tasks_list", turbo_action: "advance" },
          class: "inline-flex items-center justify-center rounded-xl bg-yellow-400 py-3 px-6 text-center text-sm font-semibold text-black hover:bg-yellow-300 lg:px-8 xl:px-10" %>
    <% end %>
  </div>
</div>

<!-- New Task Button with Modal -->
<%= link_to new_task_path,
    data: { turbo_frame: "modal" },
    class: "inline-flex items-center justify-center rounded-xl bg-yellow-400 py-3 px-6 text-center text-sm font-semibold text-black hover:bg-yellow-300" do %>
  <span class="material-icons <%= margin_end_class('2') %>">add</span>
  <%= t('tasks.new') %>
<% end %>

<!-- Modal container -->
<%= turbo_frame_tag "modal" %>
