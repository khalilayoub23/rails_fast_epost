<!-- Example: Task Form with Turbo Frame -->
<%= form_with model: task, 
              data: { 
                controller: "form-validation",
                turbo_frame: dom_id(task)
              } do |f| %>
  
  <div class="space-y-5.5">
    <!-- Title field -->
    <div>
      <%= f.label :title, class: "mb-3 block text-sm font-medium text-black dark:text-white" %>
      <%= f.text_field :title,
          required: true,
          minlength: 3,
          maxlength: 200,
          placeholder: t('tasks.title_placeholder'),
          class: "w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary",
          data: { 
            form_validation_target: "input",
            action: "blur->form-validation#validateField"
          } %>
      <span class="text-xs text-red-500 hidden" data-form-validation-target="error"></span>
    </div>

    <!-- Description field -->
    <div>
      <%= f.label :description, class: "mb-3 block text-sm font-medium text-black dark:text-white" %>
      <%= f.text_area :description,
          rows: 4,
          placeholder: t('tasks.description_placeholder'),
          class: "w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" %>
    </div>

    <!-- Status field -->
    <div>
      <%= f.label :status, class: "mb-3 block text-sm font-medium text-black dark:text-white" %>
      <%= f.select :status,
          options_for_select(Task.statuses.keys, task.status),
          {},
          class: "relative z-20 w-full appearance-none rounded border border-stroke bg-transparent py-3 px-5 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary" %>
    </div>

    <!-- Due date field -->
    <div>
      <%= f.label :due_date, class: "mb-3 block text-sm font-medium text-black dark:text-white" %>
      <%= f.date_field :due_date,
          class: "w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" %>
    </div>

    <!-- Assigned to (with autocomplete) -->
    <div data-controller="autocomplete">
      <%= f.label :assigned_to_id, class: "mb-3 block text-sm font-medium text-black dark:text-white" %>
      <%= f.text_field :assigned_to_name,
          placeholder: t('tasks.search_user'),
          class: "w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary",
          data: { 
            autocomplete_target: "input",
            autocomplete_url_value: search_users_path,
            action: "input->autocomplete#search"
          } %>
      <%= f.hidden_field :assigned_to_id, data: { autocomplete_target: "hiddenInput" } %>
      
      <div class="hidden absolute z-50 mt-1 w-full bg-white dark:bg-boxdark border border-stroke dark:border-strokedark rounded-lg shadow-lg max-h-60 overflow-auto"
           data-autocomplete-target="results">
      </div>
    </div>

    <!-- Form actions -->
    <div class="flex items-center gap-3">
      <%= f.submit t('common.save'),
          class: "inline-flex items-center justify-center rounded-md bg-primary py-3 px-6 text-center font-medium text-white hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",
          data: { form_validation_target: "submit" } %>
      
      <%= link_to t('common.cancel'),
          task.persisted? ? task : tasks_path,
          data: { turbo_frame: "_top" },
          class: "inline-flex items-center justify-center rounded-md border border-stroke py-3 px-6 text-center font-medium hover:shadow-1 dark:border-strokedark" %>
    </div>
  </div>
<% end %>
