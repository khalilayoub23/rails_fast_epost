<div class="rounded-2xl border border-white/10 bg-white/5 p-6 shadow-xl shadow-black/30 backdrop-blur">
  <h3 class="text-xl font-semibold text-white mb-4">
    <span class="material-icons align-middle text-yellow-400">description</span>
    <%= t("tasks.legal_documents_title", default: "Legal Documents") %>
  </h3>
  <div class="space-y-5">
    <% grouped_task_legal_files(task.legal_files).each do |_phase_key, phase_title, files| %>
      <section>
        <h4 class="mb-3 text-sm font-semibold uppercase tracking-wide text-yellow-200"><%= phase_title %></h4>
        <div class="space-y-3">
          <% files.each do |file| %>
            <div class="flex items-center justify-between rounded-xl border border-white/10 bg-white/5 p-4 hover:bg-white/10 transition">
              <div class="flex items-center gap-3">
                <% if file.content_type == 'application/pdf' %>
                  <svg class="h-8 w-8 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                  </svg>
                <% else %>
                  <svg class="h-8 w-8 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/>
                  </svg>
                <% end %>
                <div>
                  <p class="text-sm font-semibold text-white"><%= file.filename %></p>
                  <p class="text-xs text-slate-400">
                    <%= number_to_human_size(file.byte_size) %> Â·
                    <%= t("tasks.uploaded_ago", default: "Uploaded %{time} ago", time: time_ago_in_words(file.created_at)) %>
                  </p>
                </div>
              </div>
              <div class="flex items-center gap-2">
                <%= link_to rails_blob_path(file, disposition: "inline"),
                      target: "_blank",
                      class: "inline-flex items-center gap-1 rounded-lg bg-yellow-400 px-3 py-2 text-sm font-semibold text-black hover:bg-yellow-300 transition" do %>
                  <span class="material-icons text-base">visibility</span>
                  <%= t("common.view", default: "View") %>
                <% end %>
                <% if file.content_type == 'application/pdf' %>
                  <%= link_to rails_blob_path(file, disposition: "inline"),
                        target: "_blank",
                        class: "inline-flex items-center gap-1 rounded-lg border border-sky-300/30 bg-sky-500/10 px-3 py-2 text-sm font-semibold text-sky-100 hover:bg-sky-500/20 transition" do %>
                    <span class="material-icons text-base">print</span>
                    <%= t("common.print", default: "Print") %>
                  <% end %>
                <% end %>
                <%= link_to rails_blob_path(file, disposition: "attachment"),
                      class: "inline-flex items-center gap-1 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm font-semibold text-white hover:bg-white/10 transition" do %>
                  <span class="material-icons text-base">download</span>
                  <%= t("common.download", default: "Download") %>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      </section>
    <% end %>
  </div>
</div>
