<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-900">Document Templates</h1>
    <%= link_to "New Template", new_admin_document_template_path, class: "bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded" %>
  </div>

  <!-- Filters -->
  <div class="bg-white rounded-lg shadow p-4 mb-6">
    <%= form_with url: admin_document_templates_path, method: :get, class: "flex gap-4 flex-wrap" do %>
      <div>
        <%= label_tag :category, "Category", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= select_tag :category, 
            options_for_select([["All Categories", ""]] + DocumentTemplate::CATEGORIES.map { |c| [c, c] }, params[:category]),
            class: "block w-full rounded-md border-gray-300 shadow-sm" %>
      </div>
      
      <div>
        <%= label_tag :template_type, "Type", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= select_tag :template_type,
            options_for_select([["All Types", ""], ["Prawn Template", "prawn_template"], ["Fillable Form", "fillable_form"], ["Hybrid", "hybrid"]], params[:template_type]),
            class: "block w-full rounded-md border-gray-300 shadow-sm" %>
      </div>
      
      <div>
        <%= label_tag :active, "Status", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= select_tag :active,
            options_for_select([["All", ""], ["Active Only", "true"]], params[:active]),
            class: "block w-full rounded-md border-gray-300 shadow-sm" %>
      </div>
      
      <div class="flex items-end">
        <%= submit_tag "Filter", class: "bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded" %>
      </div>
    <% end %>
  </div>

  <!-- Templates Grid -->
  <% if @document_templates.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @document_templates.each do |template| %>
        <div class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6">
          <div class="flex justify-between items-start mb-4">
            <h3 class="text-xl font-semibold text-gray-900"><%= template.name %></h3>
            <span class="<%= template.active? ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800' %> text-xs font-semibold px-2 py-1 rounded">
              <%= template.active? ? 'Active' : 'Inactive' %>
            </span>
          </div>
          
          <% if template.category.present? %>
            <p class="text-sm text-gray-600 mb-2">
              <span class="font-medium">Category:</span> <%= template.category %>
            </p>
          <% end %>
          
          <p class="text-sm text-gray-600 mb-2">
            <span class="font-medium">Type:</span> <%= template.template_type.titleize %>
          </p>
          
          <% if template.description.present? %>
            <p class="text-sm text-gray-700 mb-4"><%= truncate(template.description, length: 100) %></p>
          <% end %>
          
          <% if template.pdf_file.attached? %>
            <p class="text-xs text-gray-500 mb-4">
              ðŸ“„ <%= template.file_size %>
            </p>
          <% end %>
          
          <div class="flex gap-2 mt-4">
            <%= link_to "View", admin_document_template_path(template), class: "flex-1 text-center bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold py-2 px-3 rounded" %>
            <%= link_to "Edit", edit_admin_document_template_path(template), class: "flex-1 text-center bg-gray-600 hover:bg-gray-700 text-white text-sm font-semibold py-2 px-3 rounded" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="bg-white rounded-lg shadow p-8 text-center">
      <p class="text-gray-600 text-lg mb-4">No document templates found.</p>
      <%= link_to "Create your first template", new_admin_document_template_path, class: "inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded" %>
    </div>
  <% end %>
</div>
