<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-title-md2 font-bold text-white"><%= t("document_templates.index.title") %></h1>
    <%= link_to t("document_templates.index.new"), new_admin_document_template_path, class: "inline-flex items-center rounded-xl bg-yellow-400 px-4 py-2 text-sm font-semibold text-black hover:bg-yellow-300" %>
  </div>

  <!-- Filters -->
  <div class="rounded-2xl border border-white/10 bg-white/5 p-4 shadow-xl shadow-black/30 backdrop-blur mb-6">
    <%= form_with url: admin_document_templates_path, method: :get, class: "flex gap-4 flex-wrap" do %>
      <div>
        <%= label_tag :category, t("document_templates.index.category"), class: "block text-sm font-medium text-slate-200 mb-1" %>
        <%= select_tag :category,
            options_for_select([[t("document_templates.index.all_categories"), ""]] + DocumentTemplate::CATEGORIES.map { |c| [c, c] }, params[:category]),
            class: "block w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-400/30" %>
      </div>
      
      <div>
        <%= label_tag :template_type, t("document_templates.index.type"), class: "block text-sm font-medium text-slate-200 mb-1" %>
        <%= select_tag :template_type,
            options_for_select([
              [t("document_templates.index.all_types"), ""],
              [t("document_templates.types.prawn_template"), "prawn_template"],
              [t("document_templates.types.fillable_form"), "fillable_form"],
              [t("document_templates.types.hybrid"), "hybrid"]
            ], params[:template_type]),
            class: "block w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-400/30" %>
      </div>
      
      <div>
        <%= label_tag :active, t("document_templates.index.status"), class: "block text-sm font-medium text-slate-200 mb-1" %>
        <%= select_tag :active,
            options_for_select([[t("document_templates.index.status_all"), ""], [t("document_templates.index.status_active"), "true"]], params[:active]),
            class: "block w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-400/30" %>
      </div>
      
      <div class="flex items-end">
        <%= submit_tag t("document_templates.index.filter"), class: "inline-flex items-center rounded-xl bg-white/10 px-4 py-2 text-sm font-semibold text-white hover:bg-white/15" %>
      </div>
    <% end %>
  </div>

  <!-- Templates Grid -->
  <% if @document_templates.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @document_templates.each do |template| %>
        <div class="rounded-2xl border border-white/10 bg-white/5 p-6 shadow-xl shadow-black/30 backdrop-blur hover:bg-white/10 transition">
          <div class="flex justify-between items-start mb-4">
            <h3 class="text-xl font-semibold text-white"><%= template.name %></h3>
            <span class="<%= template.active? ? 'bg-emerald-500/15 text-emerald-200' : 'bg-white/10 text-slate-200' %> text-xs font-semibold px-2 py-1 rounded">
              <%= template.active? ? t("document_templates.status.active") : t("document_templates.status.inactive") %>
            </span>
          </div>
          
          <% if template.category.present? %>
            <p class="text-sm text-slate-300 mb-2">
              <span class="font-medium"><%= t("document_templates.labels.category") %></span> <%= template.category %>
            </p>
          <% end %>
          
          <p class="text-sm text-slate-300 mb-2">
            <span class="font-medium"><%= t("document_templates.labels.type") %></span> <%= t("document_templates.types.#{template.template_type}") %>
          </p>
          
          <% if template.description.present? %>
            <p class="text-sm text-slate-200 mb-4"><%= truncate(template.description, length: 100) %></p>
          <% end %>
          
          <% if template.pdf_file.attached? %>
            <p class="text-xs text-slate-400 mb-4">
              ðŸ“„ <%= template.file_size %>
            </p>
          <% end %>
          
          <div class="flex gap-2 mt-4">
            <%= link_to t("document_templates.actions.view"), admin_document_template_path(template), class: "flex-1 text-center rounded-xl bg-yellow-400 py-2 px-3 text-sm font-semibold text-black hover:bg-yellow-300" %>
            <%= link_to t("document_templates.actions.edit"), edit_admin_document_template_path(template), class: "flex-1 text-center rounded-xl bg-white/10 py-2 px-3 text-sm font-semibold text-white hover:bg-white/15" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="rounded-2xl border border-white/10 bg-white/5 p-8 text-center shadow-xl shadow-black/30 backdrop-blur">
      <p class="text-slate-300 text-lg mb-4"><%= t("document_templates.index.empty") %></p>
      <%= link_to t("document_templates.index.create_first"), new_admin_document_template_path, class: "inline-flex items-center rounded-xl bg-yellow-400 px-4 py-2 text-sm font-semibold text-black hover:bg-yellow-300" %>
    </div>
  <% end %>
</div>
