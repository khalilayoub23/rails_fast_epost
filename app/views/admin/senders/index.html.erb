<%# app/views/admin/senders/index.html.erb %>
<div class="page-header flex items-center justify-between mb-6">
  <h1 class="text-2xl font-bold">Senders</h1>
  <%= link_to 'New Sender', new_admin_sender_path, class: 'btn btn-primary' %>
</div>

<div class="mb-4">
  <%= form_with url: admin_senders_path, method: :get, local: true, class: 'flex gap-2' do |f| %>
    <%= f.label :search, 'Search', class: 'sr-only' %>
    <%= f.text_field :search, value: params[:search], placeholder: 'Name, email, company...', class: 'input input-bordered' %>
    <%= f.select :sender_type, Sender.sender_types.map { |k, v| [k.titleize, k] }, { include_blank: 'All Types' }, class: 'input input-bordered' %>
    <%= f.submit 'Filter', class: 'btn btn-secondary' %>
  <% end %>
</div>

<table class="table-auto w-full bg-white rounded shadow">
  <thead>
    <tr>
      <th class="px-4 py-2">Name</th>
      <th class="px-4 py-2">Type</th>
      <th class="px-4 py-2">Email</th>
      <th class="px-4 py-2">Phone</th>
      <th class="px-4 py-2">Company</th>
      <th class="px-4 py-2">Tasks</th>
      <th class="px-4 py-2">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @senders.each do |sender| %>
      <tr>
        <td class="border px-4 py-2 font-semibold">
          <%= link_to sender.display_name, admin_sender_path(sender), class: 'text-blue-700 hover:underline' %>
        </td>
        <td class="border px-4 py-2">
          <span class="badge badge-info"><%= sender.sender_type.titleize %></span>
        </td>
        <td class="border px-4 py-2"><%= sender.email %></td>
        <td class="border px-4 py-2"><%= sender.phone %></td>
        <td class="border px-4 py-2"><%= sender.company_name %></td>
        <td class="border px-4 py-2"><%= sender.tasks.count %></td>
        <td class="border px-4 py-2">
          <%= link_to 'Edit', edit_admin_sender_path(sender), class: 'btn btn-xs btn-outline' %>
          <%= link_to 'Delete', admin_sender_path(sender), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-xs btn-error' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
